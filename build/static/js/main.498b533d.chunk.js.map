{"version":3,"sources":["../../../server/client/src/components/Header.jsx","../../../server/client/src/components/dropbox.js","../../../server/client/src/components/Loader.jsx","../../../server/client/src/pages/Authorize.jsx","../../../server/client/src/components/dateString.js","../../../server/client/src/pages/MyPlaylists.jsx","../../../server/client/src/components/Controls.jsx","../../../server/client/src/components/NowPlaying.jsx","../../../server/client/src/components/PlayerSongs.jsx","../../../server/client/src/components/Player.jsx","../../../server/client/src/components/Back.jsx","../../../server/client/src/pages/Playlist.jsx","../../../server/client/src/components/Song.jsx","../../../server/client/src/components/Songs.jsx","../../../server/client/src/components/PlaylistInProgressSong.jsx","../../../server/client/src/components/PlaylistInProgress.jsx","../../../server/client/src/pages/NewPlaylist.jsx","../../../server/client/src/pages/AddingSongs.jsx","../../../server/client/src/pages/NotFound.jsx","../../../server/client/src/AppRouter.jsx","../../../server/client/src/serviceWorker.js","../../../server/client/src/index.js","../../../server/client/src/client-env.js"],"names":["Header","react_default","a","createElement","id","href","react_router_dom","name","exact","activeClassName","to","dropbox","getDbx","Dropbox","accessToken","_this","fetch","getUser","_callee","regenerator_default","wrap","_context","prev","next","usersGetCurrentAccount","then","res","abrupt","sent","stop","getSharedLinks","_callee2","_context2","sharingListSharedLinks","_ref3","links","getLink","_callee3","songPath","_context3","sharingCreateSharedLinkWithSettings","path","settings","requested_visibility",".tag","url","catch","rej","console","log","getSongs","_callee4","songs","_context4","filesListFolder","i","entries","push","error","getAuthorizationUrl","_callee6","_context6","concat","env","api","_ref7","Object","asyncToGenerator","mark","_callee5","_ref8","_context5","json","_x2","apply","this","arguments","authenticate","_callee8","tokenOrHash","_context8","method","body","JSON","stringify","headers","Content-Type","_ref10","_callee7","_context7","_x4","Loader","_ref","type","className","PlayLoader","_ref2","Authorize","state","authUrl","setState","render","Component","months","showDateString","dateObj","year","Date","getFullYear","date","getDate","monthIndex","getMonth","Playlist","playlist","_id","NoPlaylists","MyPlaylists","playlists","sortReversed","loading","reverseSort","_this2","reverse","account_id","_this3","length","noPlaylists","_x","_this4","MyPlaylists_NoPlaylists","onClick","index_esm","map","MyPlaylists_Playlist","key","LeftControls","props","Controls_PrevSong","skip","Controls_PlayPause","playing","togglePlayPause","songLoading","Controls_NextSong","NextSong","PlayPause","Loader_PlayLoader","as","PrevSong","Seeker","min","max","defaultValue","disabled","onChange","e","timeRemaining","Volume","curve","input","x","undefined","Math","pow","volume","target","value","setVolume","RightControls","Controls_Volume","v","Controls","Controls_LeftControls","direction","Controls_Seeker","canPlayThrough","handleSeek","Controls_RightControls","NowPlaying","items","slice","call","document","querySelectorAll","timer","random","forEach","item","top","style","setInterval","React","PlayerSongs","currentSongIndex","changeSong","song","components_NowPlaying","Player","repeat","currentTime","songSources","startTimeInterval","timeInterval","handleTimeUpdate","stopTimeInterval","clearInterval","toggleRepeat","_isMounted","pause","play","handleOnPlay","continuePlaying","handleOnStop","currentSong","sound","seek","handleKeyDown","keyHeld","handleKeyUp","componentDidMount","loadAudio","handleKeyboardControls","components_Controls","Howl","src","source","format","preload","onload","handleOnLoad","onend","onplay","onstop","setPlaylistState","index","getElementById","playWhenReady","n","_ref$duration","duration","currentSongDuration","_ref$currentTime","totalSecs","floor","secsRemaining","getTimeRemaining","window","addEventListener","off","unload","removeEventListener","Back","history","goBack","text","match","params","setCurrentSongIndex","componentWillMount","components_Back","components_Player","values","Song","selected","handleClick","removeSongFromPlaylist","addSongToPlaylist","Songs","components_Song","isSongInPlaylist","songIsInPlaylist","playlistSongs","handleOnClick","react_beautiful_dnd_esm","draggableId","provided","snapshot","assign","ref","innerRef","draggableProps","dragHandleProps","isDragging","PlaylistInProgress","reorderSongs","list","startIndex","endIndex","result","Array","from","_result$splice","splice","removed","slicedToArray","onDragEnd","droppableId","droppableProps","PlaylistInProgressSong","placeholder","destination","updatePlaylistSongs","NewPlaylist","songIndex","components_Songs","dbx","components_PlaylistInProgress","Form","onSubmit","handleSubmit","added","react_router","link","Button","findIndex","existingLinks","matchedLink","find","t0","path_lower","replace","getSongLinks","_ref4","_x5","preventDefault","inputEl","getElementsByName","trim","thisSong","keys","escapedKey","mongoKey","escape","createPlaylist","AddingSongs","NotFound","Routes","authenticated","pages_Authorize","component","routeProps","pages_NewPlaylist","AppRouter","tokenHash","Cookies","get","parse","location","query","components_Header","AppRouter_Routes","set","Boolean","hostname","ReactDOM","src_AppRouter","navigator","serviceWorker","ready","registration","unregister","require","config","module","exports","mode","redirect","uri","app"],"mappings":"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","file":"static/js/main.498b533d.chunk.js","sourcesContent":["import React from 'react'\nimport { NavLink } from 'react-router-dom'\n\nconst Header = () => (\n\t<nav>\n\t\t<div id=\"name\">\n\t\t\t<a href=\"/\">Playlist Dr</a>\n\t\t</div>\n\t\t<div id=\"page-links\">\n\t\t\t<NavLink name=\"my-playlists\" exact activeClassName=\"active\" to=\"/playlists\">\n\t\t\t\tMy Playlists\n\t\t\t</NavLink>\n\t\t\t<NavLink name=\"new-playlist\" exact activeClassName=\"active\" to=\"/playlists/new\">\n\t\t\t\tNew Playlist\n\t\t\t</NavLink>\n\t\t</div>\n\t</nav>\n)\n\nexport default Header\n","import fetch from 'node-fetch'\nimport { Dropbox } from 'dropbox'\nimport { env } from '../client-env'\n\nclass DropboxObj {\n\tgetDbx = () => new Dropbox({ accessToken: this.accessToken, fetch })\n\tgetUser = async () => {\n\t\treturn await this.getDbx().usersGetCurrentAccount().then((res) => res)\n\t}\n\tgetSharedLinks = async () => await this.getDbx().sharingListSharedLinks().then(({ links }) => links)\n\tgetLink = async (songPath) => {\n\t\t// return await this.getDbx().filesGetTemporaryLink({ path: songPath }).then(({ link }) => link)\n\t\treturn await this.getDbx()\n\t\t\t.sharingCreateSharedLinkWithSettings({\n\t\t\t\tpath: songPath,\n\t\t\t\tsettings: { requested_visibility: { '.tag': 'public' } }\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\t// report if resolved_visibility is not 'public': links won't be publically listenable\n\t\t\t\treturn res.url\n\t\t\t})\n\t\t\t.catch((rej) => console.log('Rejected:', rej))\n\t}\n\tgetSongs = async () => {\n\t\tconst songs = []\n\t\tawait this.getDbx()\n\t\t\t.filesListFolder({ path: '' })\n\t\t\t.then((res) => {\n\t\t\t\tfor (let i in res.entries) songs.push(res.entries[i])\n\t\t\t})\n\t\t\t.catch((error) => console.error(error))\n\t\treturn songs\n\t}\n\tgetAuthorizationUrl = async () => {\n\t\treturn await fetch(`${env.api.url}/api/get-auth-url`).then(async (res) => {\n\t\t\tconst { url } = await res.json()\n\t\t\treturn url\n\t\t})\n\t}\n\tauthenticate = async (tokenOrHash) => {\n\t\treturn await fetch(`${env.api.url}/api/auth`, {\n\t\t\tmethod: 'post',\n\t\t\tbody: JSON.stringify(tokenOrHash),\n\t\t\theaders: { 'Content-Type': 'application/json' }\n\t\t}).then(async (res) => {\n\t\t\tconst accessToken = await res.json()\n\t\t\tif (accessToken) this.accessToken = accessToken\n\t\t\treturn res\n\t\t})\n\t}\n}\n\nconst dropbox = new DropboxObj()\n\nexport default dropbox\n","import React from 'react'\n\nexport default ({ type }) => (\n\t<div className={`loader ${type || ''}`}>\n\t\t<div />\n\t</div>\n)\n\nexport const PlayLoader = ({ type }) => (\n\t<div className=\"play-loader-wrapper\">\n\t\t<div className={`play-loader ${type || ''}`}>\n\t\t\t<div />\n\t\t</div>\n\t</div>\n)\n","import React, { Component } from 'react'\nimport dropbox from '../components/dropbox'\n\nclass Authorize extends Component {\n\tstate = {\n\t\turl: ''\n\t}\n\tauthUrl = async () => {\n\t\tconst url = await dropbox.getAuthorizationUrl()\n\t\tthis.setState({ url })\n\t}\n\tcomponentDidMount() {\n\t\tthis.authUrl()\n\t}\n\trender = () => (\n\t\t<main>\n\t\t\t<h1>Authorization Required</h1>\n\t\t\t<div id=\"content-wrapper\">{this.state.url && <a href={this.state.url}>Click here to authorize.</a>}</div>\n\t\t</main>\n\t)\n}\n\nexport default Authorize\n","const months = [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ]\n\nconst showDateString = (dateObj) => {\n\tdateObj = new Date(dateObj)\n\tlet year = dateObj.getFullYear()\n\tlet date = dateObj.getDate()\n\tlet monthIndex = dateObj.getMonth()\n\tlet month = months[monthIndex]\n\treturn `${month} ${date}, ${year}`\n}\n\nexport default showDateString\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport { FaCaretDown, FaCaretUp } from 'react-icons/fa'\nimport fetch from 'node-fetch'\nimport dropbox from '../components/dropbox'\nimport Loader from '../components/Loader'\nimport { env } from '../client-env'\nimport showDateString from '../components/dateString'\n\nconst Playlist = ({ playlist }) => (\n\t<div className=\"playlist\">\n\t\t<Link to={`/playlists/${playlist._id}`}>{playlist.name}</Link>\n\t\t<div className=\"playlist-date\">{showDateString(playlist.date)}</div>\n\t</div>\n)\n\nclass NoPlaylists extends Component {\n\trender = () => (\n\t\t<div>\n\t\t\t<h2>You don't yet have any playlists on this account.</h2>\n\t\t\t<p>\n\t\t\t\t<a href=\"/playlists/new\">Click here to make one!</a>\n\t\t\t</p>\n\t\t</div>\n\t)\n}\n\nclass MyPlaylists extends Component {\n\tstate = { playlists: [], sortReversed: false }\n\tloading = true\n\tasync componentDidMount() {\n\t\tconst { account_id } = await dropbox.getUser()\n\t\tfetch(`${env.api.url}/api/${account_id}/playlists`).then(async (res) => {\n\t\t\tconst playlist = await res.json()\n\t\t\tthis.loading = false\n\t\t\tif (playlist.length === 0) this.setState({ noPlaylists: true })\n\t\t\telse this.setState({ playlists: this.state.playlists.concat(playlist) })\n\t\t})\n\t}\n\treverseSort = () =>\n\t\tthis.setState({ playlists: this.state.playlists.reverse(), sortReversed: !this.state.sortReversed })\n\trender() {\n\t\treturn (\n\t\t\t<main id=\"playlists\">\n\t\t\t\t<div className=\"top-heading heading no-nav-heading\">\n\t\t\t\t\t<h1>My Playlists</h1>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"content-wrapper\">\n\t\t\t\t\t{this.loading ? (\n\t\t\t\t\t\t<Loader type=\"inline\" />\n\t\t\t\t\t) : this.state.noPlaylists ? (\n\t\t\t\t\t\t<NoPlaylists />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button className=\"button date-sort\" onClick={() => this.reverseSort()}>\n\t\t\t\t\t\t\t\tDate{' '}\n\t\t\t\t\t\t\t\t<span className=\"sort-icon\">\n\t\t\t\t\t\t\t\t\t{this.state.sortReversed ? <FaCaretUp /> : <FaCaretDown />}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{this.state.playlists.map((playlist, i) => <Playlist key={i} playlist={playlist} />)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t)\n\t}\n}\n\nexport default MyPlaylists\n","import React, { Component } from 'react'\nimport { FaForward, FaPlay, FaPause, FaBackward, FaVolumeUp } from 'react-icons/fa'\nimport { PlayLoader } from './Loader'\n\nconst Controls = (props) => (\n\t<div id=\"player-wrapper\">\n\t\t<div id=\"player\">\n\t\t\t<LeftControls\n\t\t\t\tplaying={props.playing}\n\t\t\t\ttogglePlayPause={() => props.togglePlayPause()}\n\t\t\t\tskip={(direction) => props.skip(direction)}\n\t\t\t\tsongLoading={props.songLoading}\n\t\t\t/>\n\t\t\t<Seeker\n\t\t\t\ttimeRemaining={props.timeRemaining}\n\t\t\t\tdisabled={!props.canPlayThrough}\n\t\t\t\tonChange={(e) => props.handleSeek(e)}\n\t\t\t/>\n\t\t\t<RightControls setVolume={(v) => props.setVolume(v)} />\n\t\t</div>\n\t</div>\n)\n\nconst LeftControls = (props) => (\n\t<div id=\"controls-left\">\n\t\t<PrevSong skip={() => props.skip('prev')} />\n\t\t<PlayPause\n\t\t\tplaying={props.playing}\n\t\t\ttogglePlayPause={() => props.togglePlayPause()}\n\t\t\tsongLoading={props.songLoading}\n\t\t/>\n\t\t<NextSong skip={() => props.skip('next')} />\n\t</div>\n)\n\nconst NextSong = (props) => (\n\t<button className=\"next-song\" onClick={() => props.skip()}>\n\t\t<FaForward />\n\t</button>\n)\nconst PlayPause = (props) =>\n\tprops.songLoading ? (\n\t\t<PlayLoader as=\"button\" />\n\t) : (\n\t\t<button className=\"play-pause\" onClick={() => props.togglePlayPause()}>\n\t\t\t{props.playing ? <FaPause /> : <FaPlay />}\n\t\t</button>\n\t)\n\nconst PrevSong = (props) => (\n\t<button className=\"prev-song\" onClick={() => props.skip()}>\n\t\t<FaBackward />\n\t</button>\n)\n\nclass Seeker extends Component {\n\trender = () => (\n\t\t<div id=\"seek-display\">\n\t\t\t<div id=\"seek-wrapper\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"range\"\n\t\t\t\t\tid=\"seek\"\n\t\t\t\t\tmin=\"0\"\n\t\t\t\t\tmax=\"100\"\n\t\t\t\t\tdefaultValue=\"0\"\n\t\t\t\t\tdisabled={this.props.disabled}\n\t\t\t\t\tonChange={(e) => this.props.onChange(e)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div id=\"time-remaining\">-{this.props.timeRemaining}</div>\n\t\t</div>\n\t)\n}\n\nclass Volume extends Component {\n\tcurve = (input, x = 1.5) => Math.pow(input, x) / Math.pow(100, x) * 100\n\tonChange(e) {\n\t\tconst volume = this.curve(e.target.value) / 100\n\t\tthis.props.setVolume(volume)\n\t}\n\trender = () => (\n\t\t<div id=\"volume-control\">\n\t\t\t<FaVolumeUp />\n\t\t\t<input\n\t\t\t\ttype=\"range\"\n\t\t\t\tid=\"volume-input\"\n\t\t\t\tmin=\"0\"\n\t\t\t\tmax=\"100\"\n\t\t\t\tdefaultValue=\"100\"\n\t\t\t\tonChange={(e) => this.onChange(e)}\n\t\t\t/>\n\t\t</div>\n\t)\n}\n\nconst RightControls = (props) => (\n\t<div id=\"controls-right\">\n\t\t<Volume setVolume={(v) => props.setVolume(v)} />\n\t</div>\n)\n\nexport default Controls\n","import React from 'react'\n\nclass NowPlaying extends React.Component {\n\tcomponentDidMount() {\n\t\tlet items = [].slice.call(document.querySelectorAll('.now-playing .item'))\n\n\t\tthis.timer = null\n\t\tfunction getRandomArbitrary(min, max) {\n\t\t\treturn Math.random() * (max - min) + min\n\t\t}\n\n\t\tlet random = (items) => {\n\t\t\titems.forEach((item) => {\n\t\t\t\tlet top = getRandomArbitrary(0, 70)\n\t\t\t\titem.style.top = top + '%'\n\t\t\t})\n\t\t}\n\n\t\tlet start = () => {\n\t\t\tthis.timer = setInterval(() => {\n\t\t\t\trandom(items)\n\t\t\t}, 300)\n\t\t}\n\n\t\tstart()\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.timer = null\n\t}\n\trender = () => (\n\t\t<div className=\"now-playing\">\n\t\t\t<div className=\"item-wrapper\">\n\t\t\t\t<div className=\"item\" />\n\t\t\t</div>\n\t\t\t<div className=\"item-wrapper\">\n\t\t\t\t<div className=\"item\" />\n\t\t\t</div>\n\t\t\t<div className=\"item-wrapper\">\n\t\t\t\t<div className=\"item\" />\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default NowPlaying\n","import React from 'react'\nimport NowPlaying from './NowPlaying'\nimport { PlayLoader } from './Loader'\n\nexport default ({ songs, currentSongIndex, playing, changeSong, songLoading }) => {\n\tif (!songs || songs.length === 0) return <div />\n\treturn songs.map((song, i) => (\n\t\t<div key={i} className={`song ${currentSongIndex === i && 'current-song'}`} onClick={() => changeSong(i)}>\n\t\t\t<div className=\"now-playing-container\">\n\t\t\t\t{songLoading && currentSongIndex === i ? (\n\t\t\t\t\t<PlayLoader type=\"inline\" />\n\t\t\t\t) : playing && currentSongIndex === i ? (\n\t\t\t\t\t<NowPlaying />\n\t\t\t\t) : (\n\t\t\t\t\t<div className=\"song-number\">{i + 1}.</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className={`song-name ${currentSongIndex === i && playing && 'now-playing'}`}>{song.name}</div>\n\t\t</div>\n\t))\n}\n","import React, { Component } from 'react'\nimport { Howl } from 'howler'\nimport Controls from '../components/Controls'\nimport PlayerSongs from './PlayerSongs'\n\nclass Player extends Component {\n\tstate = {\n\t\trepeat: false,\n\t\tcurrentTime: 0,\n\t\ttimeRemaining: '-:--',\n\t\tsongSources: [],\n\t\tcanPlayThrough: false,\n\t\tsongLoading: true,\n\t\tplaying: false\n\t}\n\tloadAudio(currentSongIndex = this.props.currentSongIndex) {\n\t\tconst songs = this.props.songs\n\t\tconst currentSong = songs[currentSongIndex]\n\t\tcurrentSong.sound = new Howl({\n\t\t\tsrc: currentSong.source,\n\t\t\tformat: 'mp3',\n\t\t\tpreload: true,\n\t\t\tonload: () => this.handleOnLoad(),\n\t\t\tonend: () => this.skip('next'),\n\t\t\tonplay: () => this.handleOnPlay(),\n\t\t\tonstop: () => this.handleOnStop()\n\t\t})\n\t\tthis.props.setPlaylistState({ songs })\n\t\tif (this._isMounted) this.setState({ currentSong })\n\t}\n\tstartTimeInterval = () => (this.timeInterval = setInterval(() => this.handleTimeUpdate(), 1000))\n\tstopTimeInterval = () => clearInterval(this.timeInterval)\n\tskip(direction) {\n\t\tlet index = direction === 'prev' ? this.props.currentSongIndex - 1 : this.props.currentSongIndex + 1\n\t\tif (index < 0) index = this.props.songs.length - 1\n\t\telse if (index > this.props.songs.length - 1) index = 0\n\t\tthis.changeSong(index)\n\t}\n\tchangeSong(currentSongIndex) {\n\t\tthis.state.currentSong.sound.stop()\n\t\tif (this._isMounted) this.setState({ songLoading: true, timeRemaining: '-:--' })\n\t\tthis.props.setPlaylistState({ currentSongIndex })\n\t\tthis.loadAudio(currentSongIndex)\n\t\tconst seek = document.getElementById('seek')\n\t\tseek.value = 0\n\t\tif (!this.state.playWhenReady) this.setState({ playWhenReady: true })\n\t}\n\tplaySong(currentSongIndex) {\n\t\tthis.state.currentSong.sound.stop()\n\t\tthis.props.setPlaylistState({ currentSongIndex })\n\t\tthis.state.currentSong.sound.play()\n\t}\n\ttoggleRepeat = () => (this._isMounted ? this.setState({ repeat: !this.state.repeat }) : null)\n\tplay() {\n\t\tif (this.state.loading) {\n\t\t\tif (this._isMounted) this.setState({ playWhenReady: true })\n\t\t} else {\n\t\t\tthis.state.currentSong.sound.play()\n\t\t\tif (this._isMounted) this.setState({ continuePlaying: true })\n\t\t\tif (this.state.playWhenReady) this.setState({ playWhenReady: false })\n\t\t}\n\t}\n\tpause() {\n\t\tif (this._isMounted) this.setState({ playing: false })\n\t\tthis.state.currentSong.sound.pause()\n\t}\n\ttogglePlayPause = () => (this.state.playing ? this.pause() : this.play())\n\tgetTimeRemaining({ duration = this.state.currentSongDuration, currentTime = this.state.currentTime }) {\n\t\tconst totalSecs = Math.floor(duration - currentTime)\n\t\tconst secsRemaining = totalSecs % 60\n\t\tconst minsRemaining = totalSecs < 60 ? 0 : (totalSecs - secsRemaining) / 60\n\t\tconst leadingZero = (n) => (n < 10 ? `0${n}` : n)\n\t\treturn `${minsRemaining}:${leadingZero(secsRemaining)}`\n\t}\n\t//\n\t// HANDLERS\n\t//\n\thandleOnPlay = () => {\n\t\tif (this._isMounted) this.setState({ playing: true, continuePlaying: true })\n\t}\n\thandleOnStop = () => {\n\t\tthis.stopTimeInterval()\n\t\tif (this._isMounted) this.setState({ playing: false })\n\t}\n\thandleOnLoad() {\n\t\tconst duration = this.state.currentSong.sound.duration()\n\t\tconst seek = document.getElementById('seek')\n\t\tif (!seek) return null\n\t\tseek.max = duration\n\t\tconst currentTime = 0\n\t\tthis.startTimeInterval()\n\t\tif (this._isMounted)\n\t\t\tthis.setState({\n\t\t\t\tsongLoading: false,\n\t\t\t\tcurrentSongDuration: duration,\n\t\t\t\ttimeRemaining: this.getTimeRemaining({ duration, currentTime }),\n\t\t\t\tcanPlayThrough: true\n\t\t\t})\n\t\tif (this.state.playWhenReady && !this.state.currentSong.sound.playing()) this.play()\n\t\telse if (this.state.continuePlaying) this.play()\n\t\telse this.pause()\n\t}\n\thandleSeek = (e) => this.state.currentSong.sound.seek(e.target.value)\n\thandleTimeUpdate() {\n\t\tif (this._isMounted) this.setState({ currentTime: this.state.currentSong.sound.seek() })\n\t\tconst seek = document.getElementById('seek')\n\t\tif (!seek) return null\n\t\tseek.value = this.state.currentSong.sound.seek()\n\t\tif (this._isMounted)\n\t\t\tthis.setState({\n\t\t\t\ttimeRemaining: this.getTimeRemaining({\n\t\t\t\t\tcurrentTime: this.state.currentSong.sound.seek()\n\t\t\t\t})\n\t\t\t})\n\t}\n\t// KEYBOARD HANDLERS\n\thandleKeyDown = (e) => {\n\t\tif (!this.keyHeld) {\n\t\t\tthis.keyHeld = true\n\t\t\tif (e.key === ' ') this.state.playing ? this.pause() : this.play()\n\t\t\telse if (e.key === 'ArrowRight') this.skip('next')\n\t\t\telse if (e.key === 'ArrowLeft') this.skip('prev')\n\t\t}\n\t}\n\thandleKeyUp = (e) => (this.keyHeld = false)\n\thandleKeyboardControls() {\n\t\twindow.addEventListener('keydown', (e) => this.handleKeyDown(e))\n\t\twindow.addEventListener('keyup', (e) => this.handleKeyUp(e))\n\t}\n\t//\n\t// Lifecycle Methods\n\t//\n\tcomponentWillUnmount() {\n\t\tthis._isMounted = false\n\t\tthis.state.currentSong.sound.off()\n\t\tthis.state.currentSong.sound.unload()\n\t\tthis.stopTimeInterval()\n\t\twindow.removeEventListener('keydown', (e) => this.handleKeyDown(e))\n\t\twindow.removeEventListener('keyup', (e) => this.handleKeyUp(e))\n\t}\n\tcomponentDidMount = () => {\n\t\tthis._isMounted = true\n\t\tthis.loadAudio()\n\t\tthis.handleKeyboardControls()\n\t}\n\tsetVolume(volume) {\n\t\tthis.state.currentSong.sound.volume(volume)\n\t}\n\trender = () => (\n\t\t<main id=\"playlist\">\n\t\t\t<PlayerSongs\n\t\t\t\tchangeSong={(i) => this.changeSong(i)}\n\t\t\t\tsongs={this.props.songs}\n\t\t\t\tcurrentSongIndex={this.props.currentSongIndex}\n\t\t\t\tplaying={this.state.playing}\n\t\t\t\tsongLoading={this.state.songLoading}\n\t\t\t/>\n\t\t\t<Controls\n\t\t\t\tsongLoading={this.state.songLoading}\n\t\t\t\tplaying={this.state.playing}\n\t\t\t\tcanPlayThrough={this.state.canPlayThrough}\n\t\t\t\ttimeRemaining={this.state.timeRemaining}\n\t\t\t\trepeat={this.state.repeat}\n\t\t\t\ttogglePlayPause={() => this.togglePlayPause()}\n\t\t\t\tskip={(direction) => this.skip(direction)}\n\t\t\t\thandleSeek={(e) => this.handleSeek(e)}\n\t\t\t\tsetVolume={(volume) => this.setVolume(volume)}\n\t\t\t\ttoggleRepeat={(repeat) => this.toggleRepeat(repeat)}\n\t\t\t/>\n\t\t</main>\n\t)\n}\n\nexport default Player\n","import React from 'react'\n\nconst Back = (props) => {\n\treturn (\n\t\t<div className=\"back-nav\">\n\t\t\t<button className=\"button\" onClick={props.history.goBack}>\n\t\t\t\t{props.text || 'Back'}\n\t\t\t</button>\n\t\t</div>\n\t)\n}\n\nexport default Back\n","import React, { Component } from 'react'\nimport fetch from 'node-fetch'\n\nimport Player from '../components/Player'\nimport Loader from '../components/Loader'\nimport { env } from '../client-env'\nimport Back from '../components/Back'\n\nclass Playlist extends Component {\n\tstate = {\n\t\tid: this.props.match.params.id,\n\t\tname: '',\n\t\tsongs: [],\n\t\tcurrentSongIndex: 0\n\t}\n\tsetCurrentSongIndex = (i) => this.setState({ currentSongIndex: i })\n\tgetSongs() {\n\t\tfetch(`${env.api.url}/api/playlists/${this.state.id}`)\n\t\t\t.then(async (res) => {\n\t\t\t\tconst { songs, name, date } = await res.json()\n\t\t\t\tthis.setState({ songs: Object.values(songs), name, date })\n\t\t\t})\n\t\t\t.catch(() => this.setState({ error: 'Error: Playlist not found!' }))\n\t}\n\tsetPlaylistState = (state) => this.setState(state)\n\tcomponentWillMount = () => {\n\t\tthis.getSongs()\n\t}\n\trender = () =>\n\t\tthis.state.error ? (\n\t\t\t<div className=\"top-heading heading\">\n\t\t\t\t<Back history={this.props.history} />\n\t\t\t\t<h1>{this.state.error}</h1>\n\t\t\t</div>\n\t\t) : !this.state.songs || this.state.songs.length === 0 ? (\n\t\t\t<Loader />\n\t\t) : (\n\t\t\t<div>\n\t\t\t\t<div className=\"top-heading heading\">\n\t\t\t\t\t<a href=\"/playlists\" className=\"button\">\n\t\t\t\t\t\tBack to My Playlists\n\t\t\t\t\t</a>\n\t\t\t\t\t<h1>{this.state.name}</h1>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"content-wrapper\">\n\t\t\t\t\t<Player\n\t\t\t\t\t\tcurrentSongIndex={this.state.currentSongIndex}\n\t\t\t\t\t\tsongs={this.state.songs}\n\t\t\t\t\t\tsetCurrentSongIndex={(i) => this.setCurrentSongIndex(i)}\n\t\t\t\t\t\tsetPlaylistState={(state) => this.setPlaylistState(state)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n}\n\nexport default Playlist\n","import React, { Component } from 'react'\n\nclass Song extends Component {\n\tremoveSongFromPlaylist(e) {\n\t\tthis.props.removeSongFromPlaylist()\n\t}\n\thandleClick(e) {\n\t\tif (this.props.selected) this.removeSongFromPlaylist(e)\n\t\telse this.props.addSongToPlaylist()\n\t}\n\trender = () => (\n\t\t<div className={`song ${this.props.selected && 'selected'}`} onClick={() => this.handleClick()}>\n\t\t\t{this.props.name}\n\t\t</div>\n\t)\n}\nexport default Song\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport dropbox from './dropbox'\nimport Song from './Song'\nimport Loader from '../components/Loader'\n\nclass Songs extends Component {\n\tstate = {\n\t\tsongs: []\n\t}\n\tisSongInPlaylist(song) {\n\t\tlet songIsInPlaylist = false\n\n\t\tfor (let i = 0; i < this.props.playlistSongs.length; i++) {\n\t\t\tconst playlistSong = this.props.playlistSongs[i]\n\t\t\tif (playlistSong.id === song.id) {\n\t\t\t\tsongIsInPlaylist = true\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\treturn songIsInPlaylist\n\t}\n\tcomponentDidMount() {\n\t\tdropbox.getSongs().then((songs) => this.setState({ songs }))\n\t}\n\trender = () =>\n\t\tthis.state.songs.length < 1 ? (\n\t\t\t<Loader type=\"inline\" />\n\t\t) : (\n\t\t\t<div>\n\t\t\t\t<div className=\"heading\">\n\t\t\t\t\t<h2 className=\"inline\">Songs</h2>\n\t\t\t\t\t<Link to=\"/adding-songs\">(Not sure how to add songs?)</Link>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"songs\">\n\t\t\t\t\t{this.state.songs.map((song, i) => (\n\t\t\t\t\t\t<Song\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tremoveSongFromPlaylist={() => this.props.removeSongFromPlaylist(song)}\n\t\t\t\t\t\t\taddSongToPlaylist={() => this.props.addSongToPlaylist(song)}\n\t\t\t\t\t\t\tname={song.name}\n\t\t\t\t\t\t\tselected={this.isSongInPlaylist(song)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n}\n\nexport default Songs\n","import React from 'react'\nimport { Draggable } from 'react-beautiful-dnd'\n\nconst Song = ({ song, index, handleOnClick }) => (\n\t<Draggable key={song.id} draggableId={song.id} index={index}>\n\t\t{(provided, snapshot) => (\n\t\t\t<div\n\t\t\t\tonClick={() => handleOnClick()}\n\t\t\t\tref={provided.innerRef}\n\t\t\t\t{...provided.draggableProps}\n\t\t\t\t{...provided.dragHandleProps}\n\t\t\t\tstyle={provided.draggableProps.style}\n\t\t\t\tclassName={`song playlist-in-progress-song ${snapshot.isDragging && 'being-dragged'}`}\n\t\t\t>\n\t\t\t\t<div className=\"now-playing-container\">\n\t\t\t\t\t<div className=\"song-number\">{index + 1}.</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"song-name\">{song.name}</div>\n\t\t\t</div>\n\t\t)}\n\t</Draggable>\n)\nexport default Song\n","import React, { Component } from 'react'\nimport Song from './PlaylistInProgressSong'\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd'\n\nclass PlaylistInProgress extends Component {\n\treorderSongs = (list, startIndex, endIndex) => {\n\t\tconst result = Array.from(list)\n\t\tconst [ removed ] = result.splice(startIndex, 1)\n\t\tresult.splice(endIndex, 0, removed)\n\n\t\treturn result\n\t}\n\tonDragEnd(result) {\n\t\tif (!result.destination) return // dropped outside the list\n\t\tconst songs = this.reorderSongs(this.props.songs, result.source.index, result.destination.index)\n\t\tthis.props.updatePlaylistSongs(songs)\n\t}\n\thandleOnClick = (song) => this.props.removeSongFromPlaylist(song)\n\trender = () =>\n\t\tthis.props.songs.length < 1 ? null : (\n\t\t\t<div>\n\t\t\t\t<h2>Playlist</h2>\n\t\t\t\t<DragDropContext onDragEnd={(result) => this.onDragEnd(result)}>\n\t\t\t\t\t<Droppable droppableId=\"droppable\">\n\t\t\t\t\t\t{(provided, snapshot) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\tclassName={`playlist-in-progress-container`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{this.props.songs.map((song, index) => (\n\t\t\t\t\t\t\t\t\t<Song\n\t\t\t\t\t\t\t\t\t\thandleOnClick={() => this.handleOnClick(song)}\n\t\t\t\t\t\t\t\t\t\tsong={song}\n\t\t\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Droppable>\n\t\t\t\t</DragDropContext>\n\t\t\t</div>\n\t\t)\n}\n\nexport default PlaylistInProgress\n","import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport Songs from '../components/Songs'\nimport PlaylistInProgress from '../components/PlaylistInProgress'\nimport dropbox from '../components/dropbox'\nimport fetch from 'node-fetch'\nimport { Button, Form } from 'semantic-ui-react'\nimport mongoKey from 'mongo-key-escape'\nimport { env } from '../client-env'\n\nclass NewPlaylist extends Component {\n\tstate = {\n\t\tplaylist: { songs: [] },\n\t\terror: undefined,\n\t\tloading: false,\n\t\tsongIndex: -1\n\t}\n\taddSongToPlaylist(song) {\n\t\tconst playlist = this.state.playlist\n\t\tplaylist.songs.push(song)\n\t\tthis.setState({ playlist })\n\t}\n\tremoveSongFromPlaylist(song) {\n\t\tconst playlist = this.state.playlist\n\t\tlet index = playlist.songs.findIndex((v) => v.id === song.id)\n\t\tplaylist.songs.splice(index, 1)\n\t\tthis.setState({ playlist })\n\t}\n\tasync getSongLinks(songs) {\n\t\tconst existingLinks = await dropbox.getSharedLinks()\n\t\tsongs.forEach(async (song) => {\n\t\t\tconst matchedLink = existingLinks.find((link) => link.id === song.id)\n\t\t\tsong.source = matchedLink ? matchedLink.url : await dropbox.getLink(song.path_lower)\n\t\t\tsong.source = song.source.replace(/\\?dl=0/, '').replace(/www.dropbox/, 'dl.dropboxusercontent')\n\t\t\t// make streamable as a file\n\t\t\tsong.source += '?raw=1'\n\t\t})\n\t\treturn songs\n\t}\n\tasync createPlaylist(name, songs) {\n\t\tthis.setState({ loading: true })\n\t\tsongs = await this.getSongLinks(songs)\n\t\tconst playlist = { name, songs }\n\t\tconst { account_id } = await dropbox.getUser()\n\t\tfetch(`${env.api.url}/api/${account_id}/playlists`, {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify(playlist),\n\t\t\theaders: { 'Content-Type': 'application/json' }\n\t\t}).then(async (res) => {\n\t\t\tconst { _id } = await res.json()\n\t\t\tconsole.log('Playlist created', playlist)\n\t\t\tthis.setState({\n\t\t\t\tadded: true,\n\t\t\t\tlink: `/playlists/${_id}`,\n\t\t\t\tloading: false\n\t\t\t})\n\t\t})\n\n\t\tif (this.state.error) this.setState({ error: undefined })\n\t}\n\tasync handleSubmit(e) {\n\t\te.preventDefault()\n\t\t// const name = e.target['playlist-name'].value.trim()\n\t\tconst inputEl = document.getElementsByName('playlist-name')[0]\n\t\tconst name = inputEl.value.trim()\n\t\tconst songs = []\n\t\tthis.state.playlist.songs.forEach((song) => {\n\t\t\tconst thisSong = {}\n\t\t\tObject.keys(song).forEach((key) => {\n\t\t\t\tconst escapedKey = mongoKey.escape(key)\n\t\t\t\tthisSong[escapedKey] = song[key]\n\t\t\t})\n\t\t\tsongs.push(thisSong)\n\t\t})\n\n\t\tif (Object.values(this.state.playlist.songs).length === 0) {\n\t\t\tthis.setState({ error: 'Error: Playlist must contain at least one track.' })\n\t\t} else if (name.length < 1) {\n\t\t\tthis.setState({ error: 'Error: Playlist must have a name (set it at the top).' })\n\t\t} else {\n\t\t\tthis.createPlaylist(name, songs)\n\t\t}\n\t}\n\terror() {\n\t\treturn <div className=\"error\">{this.state.error}</div>\n\t}\n\tupdatePlaylistSongs(songs) {\n\t\tconst playlist = this.state.playlist\n\t\tplaylist.songs = songs\n\t\tthis.setState({ playlist })\n\t}\n\trender = () => (\n\t\t<main id=\"create-playlist\">\n\t\t\t<div className=\"top-heading heading no-nav-heading\">\n\t\t\t\t<h2>creating</h2>\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"playlist-title-input\"\n\t\t\t\t\tname=\"playlist-name\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Click to set playlist title\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div id=\"content-wrapper\">\n\t\t\t\t<Songs\n\t\t\t\t\tdbx={this.props.dbx}\n\t\t\t\t\taddSongToPlaylist={(song) => this.addSongToPlaylist(song)}\n\t\t\t\t\tremoveSongFromPlaylist={(song) => this.removeSongFromPlaylist(song)}\n\t\t\t\t\tplaylistSongs={this.state.playlist.songs}\n\t\t\t\t/>\n\t\t\t\t<PlaylistInProgress\n\t\t\t\t\tsongs={this.state.playlist.songs}\n\t\t\t\t\taddSongToPlaylist={(song) => this.addSongToPlaylist(song)}\n\t\t\t\t\tremoveSongFromPlaylist={(song) => this.removeSongFromPlaylist(song)}\n\t\t\t\t\tupdatePlaylistSongs={(songs) => this.updatePlaylistSongs(songs)}\n\t\t\t\t/>\n\t\t\t\t<Form id=\"create-playlist\" onSubmit={(e) => this.handleSubmit(e)}>\n\t\t\t\t\t{this.state.error && this.error()}\n\t\t\t\t\t{this.state.added && (\n\t\t\t\t\t\t// <p>\n\t\t\t\t\t\t// \tPlaylist created! Listen to it <a href={this.state.link}>here</a>.\n\t\t\t\t\t\t// </p>\n\t\t\t\t\t\t<Redirect to={this.state.link} />\n\t\t\t\t\t)}\n\t\t\t\t\t<Button className=\"button large-button\" loading={this.state.loading}>\n\t\t\t\t\t\tCreate playlist\n\t\t\t\t\t</Button>\n\t\t\t\t</Form>\n\t\t\t</div>\n\t\t</main>\n\t)\n}\nexport default NewPlaylist\n","import React, { Component } from 'react'\n\nclass AddingSongs extends Component {\n\trender = () => (\n\t\t<main>\n\t\t\t<div className=\"heading top-heading no-nav-heading\">\n\t\t\t\t<h1>Adding Songs</h1>\n\t\t\t</div>\n\t\t\t<div id=\"content-wrapper\">\n\t\t\t\t<p>\n\t\t\t\t\tTo add songs to Tracksimus, drag them into the <strong>Apps/Tracksimus</strong> folder inside your\n\t\t\t\t\tDropbox.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</main>\n\t)\n}\nexport default AddingSongs\n","import React from 'react'\n\nconst NotFound = () => (\n\t<div>\n\t\t<h1>404: Page Not Found</h1>\n\t\t<div id=\"content-wrapper\">\n\t\t\t<p>Sorry about that.</p>\n\t\t</div>\n\t</div>\n)\n\nexport default NotFound\n","import React, { Component } from 'react'\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom'\nimport Cookies from 'js-cookie'\nimport parse from 'url-parse'\n\nimport Header from './components/Header'\nimport dropbox from './components/dropbox'\nimport Loader from './components/Loader'\nimport Authorize from './pages/Authorize'\nimport MyPlaylists from './pages/MyPlaylists'\nimport Playlist from './pages/Playlist'\nimport NewPlaylist from './pages/NewPlaylist'\nimport AddingSongs from './pages/AddingSongs'\nimport NotFound from './pages/NotFound'\n\nclass Routes extends Component {\n\trender = () =>\n\t\tthis.props.authenticated ? (\n\t\t\t<Switch>\n\t\t\t\t<Route exact path=\"/\" render={() => <Redirect to=\"/playlists\" />} />\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/auth\"\n\t\t\t\t\trender={() => (this.props.authenticated ? <Redirect to=\"/playlists\" /> : <Authorize />)}\n\t\t\t\t/>\n\t\t\t\t<Route exact path=\"/playlists\" component={MyPlaylists} />\n\t\t\t\t<Route\n\t\t\t\t\texact\n\t\t\t\t\tpath=\"/playlists/new\"\n\t\t\t\t\trender={(routeProps) => <NewPlaylist {...this.props} {...routeProps} />}\n\t\t\t\t/>\n\t\t\t\t<Route exact path=\"/playlists/:id\" component={Playlist} />\n\t\t\t\t<Route exact path=\"/adding-songs\" component={AddingSongs} />\n\t\t\t\t<Route component={NotFound} />\n\t\t\t</Switch>\n\t\t) : (\n\t\t\t<Switch>\n\t\t\t\t<Route exact path=\"/\" component={Authorize} />\n\t\t\t\t<Route exact path=\"/auth\" component={Authorize} />\n\t\t\t\t<Route exact path=\"/playlists\" component={Authorize} />\n\t\t\t\t<Route exact path=\"/playlists/new\" component={Authorize} />\n\t\t\t\t<Route exact path=\"/playlists/:id\" component={Playlist} />\n\t\t\t\t<Route component={NotFound} />\n\t\t\t</Switch>\n\t\t)\n}\n\nclass AppRouter extends Component {\n\tstate = { loading: true, authenticated: false }\n\tauthenticate(tokenHash) {\n\t\tconsole.log('tokenHash:', tokenHash)\n\t\tdropbox.authenticate({ tokenHash }).then((authenticated) => {\n\t\t\tthis.setState({ loading: false, authenticated })\n\t\t\tif (authenticated) Cookies.set('tokenHash', tokenHash)\n\t\t})\n\t}\n\tcomponentDidMount = () => {\n\t\tconst tokenHash = Cookies.get('tokenHash') || parse(window.location.href, true).query.tokenHash\n\t\tif (tokenHash) this.authenticate(tokenHash)\n\t\telse this.setState({ loading: false, authenticated: false })\n\t}\n\n\trender = () => {\n\t\tif (this.state.loading) return <Loader />\n\t\telse\n\t\t\treturn (\n\t\t\t\t<Router>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Header />\n\t\t\t\t\t\t<Routes authenticated={this.state.authenticated} />\n\t\t\t\t\t</div>\n\t\t\t\t</Router>\n\t\t\t)\n\t}\n}\n\nexport default AppRouter\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './styles/styles.scss'\nimport AppRouter from './AppRouter'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<AppRouter />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","require('dotenv').config()\n\nconst env = {\n\tmode: 'production',\n\tapi: { url: 'https://playlistdr.com' },\n\tredirect: { uri: 'https://playlistdr.com/api/auth' },\n\tapp: { url: 'https://playlistdr.com' }\n}\n\nmodule.exports = { env }\n"],"sourceRoot":""}